define("echarts/chart/line",["require","./base","zrender/shape/Polyline","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(t){function e(t,e,i,n,r){o.call(this,t,e,i,n,r),this.refresh(n)}function i(t,e,i){var o=e.x,n=e.y,s=e.width,a=e.height,h=a/2;e.symbol.match("empty")&&(t.fillStyle="#fff"),e.brushType="both";var l=e.symbol.replace("empty","").toLowerCase();l.match("star")?(h=l.replace("star","")-0||5,n-=1,l="star"):("rectangle"===l||"arrow"===l)&&(o+=(s-a)/2,s=a);var c="";if(l.match("image")&&(c=l.replace(new RegExp("^image:\\/\\/"),""),l="image",o+=Math.round((s-a)/2)-1,s=a+=2),l=r.prototype.iconLibrary[l]){var d=e.x,p=e.y;t.moveTo(d,p+h),t.lineTo(d+5,p+h),t.moveTo(d+e.width-5,p+h),t.lineTo(d+e.width,p+h);var u=this;l(t,{x:o+4,y:n+4,width:s-8,height:a-8,n:h,image:c},function(){u.modSelf(),i()})}else t.moveTo(o,n+h),t.lineTo(o+s,n+h)}var o=t("./base"),n=t("zrender/shape/Polyline"),r=t("../util/shape/Icon"),s=t("../util/shape/HalfSmoothPolygon");t("../component/axis"),t("../component/grid"),t("../component/dataZoom");var a=t("../config");a.line={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid",shadowColor:"rgba(0,0,0,0)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},emphasis:{label:{show:!1}}},symbolSize:2,showAllSymbol:!1};var h=t("../util/ecData"),l=t("zrender/tool/util"),c=t("zrender/tool/color");return e.prototype={type:a.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._buildPosition()},_buildHorizontal:function(t,e,i,o){for(var n,r,s,a,h,l,c,d,p,u=this.series,g=i[0][0],f=u[g],m=this.component.xAxis.getAxis(f.xAxisIndex||0),_={},y=0,v=e;v>y&&null!=m.getNameByIndex(y);y++){r=m.getCoordByIndex(y);for(var x=0,b=i.length;b>x;x++){n=this.component.yAxis.getAxis(u[i[x][0]].yAxisIndex||0),h=a=c=l=n.getCoord(0);for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],d=f.data[y],p=this.getDataFromOption(d,"-"),_[g]=_[g]||[],o[g]=o[g]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==p?(p>=0?(a-=S>0?n.getCoordSize(p):h-n.getCoord(p),s=a):0>p&&(l+=S>0?n.getCoordSize(p):n.getCoord(p)-c,s=l),_[g].push([r,s,y,m.getNameByIndex(y),r,h]),o[g].min>p&&(o[g].min=p,o[g].minY=s,o[g].minX=r),o[g].max<p&&(o[g].max=p,o[g].maxY=s,o[g].maxX=r),o[g].sum+=p,o[g].counter++):_[g].length>0&&(this.finalPLMap[g]=this.finalPLMap[g]||[],this.finalPLMap[g].push(_[g]),_[g]=[])}a=this.component.grid.getY();for(var C,x=0,b=i.length;b>x;x++)for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],d=f.data[y],p=this.getDataFromOption(d,"-"),"-"==p&&this.deepQuery([d,f,this.option],"calculable")&&(C=this.deepQuery([d,f],"symbolSize"),a+=2*C+5,s=a,this.shapeList.push(this._getCalculableItem(g,y,m.getNameByIndex(y),r,s,"horizontal")))}for(var z in _)_[z].length>0&&(this.finalPLMap[z]=this.finalPLMap[z]||[],this.finalPLMap[z].push(_[z]),_[z]=[]);this._calculMarkMapXY(o,i,"y"),this._buildBorkenLine(t,this.finalPLMap,m,"horizontal")},_buildVertical:function(t,e,i,o){for(var n,r,s,a,h,l,c,d,p,u=this.series,g=i[0][0],f=u[g],m=this.component.yAxis.getAxis(f.yAxisIndex||0),_={},y=0,v=e;v>y&&null!=m.getNameByIndex(y);y++){s=m.getCoordByIndex(y);for(var x=0,b=i.length;b>x;x++){n=this.component.xAxis.getAxis(u[i[x][0]].xAxisIndex||0),h=a=c=l=n.getCoord(0);for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],d=f.data[y],p=this.getDataFromOption(d,"-"),_[g]=_[g]||[],o[g]=o[g]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==p?(p>=0?(a+=S>0?n.getCoordSize(p):n.getCoord(p)-h,r=a):0>p&&(l-=S>0?n.getCoordSize(p):c-n.getCoord(p),r=l),_[g].push([r,s,y,m.getNameByIndex(y),h,s]),o[g].min>p&&(o[g].min=p,o[g].minX=r,o[g].minY=s),o[g].max<p&&(o[g].max=p,o[g].maxX=r,o[g].maxY=s),o[g].sum+=p,o[g].counter++):_[g].length>0&&(this.finalPLMap[g]=this.finalPLMap[g]||[],this.finalPLMap[g].push(_[g]),_[g]=[])}a=this.component.grid.getXend();for(var C,x=0,b=i.length;b>x;x++)for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],d=f.data[y],p=this.getDataFromOption(d,"-"),"-"==p&&this.deepQuery([d,f,this.option],"calculable")&&(C=this.deepQuery([d,f],"symbolSize"),a-=2*C+5,r=a,this.shapeList.push(this._getCalculableItem(g,y,m.getNameByIndex(y),r,s,"vertical")))}for(var z in _)_[z].length>0&&(this.finalPLMap[z]=this.finalPLMap[z]||[],this.finalPLMap[z].push(_[z]),_[z]=[]);this._calculMarkMapXY(o,i,"x"),this._buildBorkenLine(t,this.finalPLMap,m,"vertical")},_buildOther:function(t,e,i,o){for(var n,r=this.series,s={},a=0,h=i.length;h>a;a++)for(var l=0,c=i[a].length;c>l;l++){var d=i[a][l],p=r[d];n=this.component.xAxis.getAxis(p.xAxisIndex||0);var u=this.component.yAxis.getAxis(p.yAxisIndex||0),g=u.getCoord(0);s[d]=s[d]||[],o[d]=o[d]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var f=0,m=p.data.length;m>f;f++){var _=p.data[f],y=this.getDataFromOption(_,"-");if(y instanceof Array){var v=n.getCoord(y[0]),x=u.getCoord(y[1]);s[d].push([v,x,f,y[0],v,g]),o[d].min0>y[0]&&(o[d].min0=y[0],o[d].minY0=x,o[d].minX0=v),o[d].max0<y[0]&&(o[d].max0=y[0],o[d].maxY0=x,o[d].maxX0=v),o[d].sum0+=y[0],o[d].counter0++,o[d].min1>y[1]&&(o[d].min1=y[1],o[d].minY1=x,o[d].minX1=v),o[d].max1<y[1]&&(o[d].max1=y[1],o[d].maxY1=x,o[d].maxX1=v),o[d].sum1+=y[1],o[d].counter1++}}}for(var b in s)s[b].length>0&&(this.finalPLMap[b]=this.finalPLMap[b]||[],this.finalPLMap[b].push(s[b]),s[b]=[]);this._calculMarkMapXY(o,i,"xy"),this._buildBorkenLine(t,this.finalPLMap,n,"other")},_buildBorkenLine:function(t,e,i,o){for(var r,a="other"==o?"horizontal":o,d=this.series,p=t.length-1;p>=0;p--){var u=t[p],g=d[u],f=e[u];if(g.type===this.type&&null!=f)for(var m=this._getBbox(u,a),_=this._sIndex2ColorMap[u],y=this.query(g,"itemStyle.normal.lineStyle.width"),v=this.query(g,"itemStyle.normal.lineStyle.type"),x=this.query(g,"itemStyle.normal.lineStyle.color"),b=this.getItemStyleColor(this.query(g,"itemStyle.normal.color"),u,-1),S=null!=this.query(g,"itemStyle.normal.areaStyle"),T=this.query(g,"itemStyle.normal.areaStyle.color"),C=0,z=f.length;z>C;C++){var E=f[C],L="other"!=o&&this._isLarge(a,E);if(L)E=this._getLargePointList(a,E);else for(var A=0,w=E.length;w>A;A++)r=g.data[E[A][2]],(this.deepQuery([r,g,this.option],"calculable")||this.deepQuery([r,g],"showAllSymbol")||"categoryAxis"===i.type&&i.isMainAxis(E[A][2])&&"none"!=this.deepQuery([r,g],"symbol"))&&this.shapeList.push(this._getSymbol(u,E[A][2],E[A][3],E[A][0],E[A][1],a));var M=new n({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{miterLimit:y,pointList:E,strokeColor:x||b||_,lineWidth:y,lineType:v,smooth:this._getSmooth(g.smooth),smoothConstraint:m,shadowColor:this.query(g,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(g,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(g,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(g,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:u,_orient:a});if(h.pack(M,d[u],u,0,C,d[u].name),this.shapeList.push(M),S){var k=new s({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{miterLimit:y,pointList:l.clone(E).concat([[E[E.length-1][4],E[E.length-1][5]],[E[0][4],E[0][5]]]),brushType:"fill",smooth:this._getSmooth(g.smooth),smoothConstraint:m,color:T?T:c.alpha(_,.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:u,_orient:a});h.pack(k,d[u],u,0,C,d[u].name),this.shapeList.push(k)}}}},_getBbox:function(t,e){var i=this.component.grid.getBbox(),o=this.xMarkMap[t];return null!=o.minX0?[[Math.min(o.minX0,o.maxX0,o.minX1,o.maxX1),Math.min(o.minY0,o.maxY0,o.minY1,o.maxY1)],[Math.max(o.minX0,o.maxX0,o.minX1,o.maxX1),Math.max(o.minY0,o.maxY0,o.minY1,o.maxY1)]]:("horizontal"===e?(i[0][1]=Math.min(o.minY,o.maxY),i[1][1]=Math.max(o.minY,o.maxY)):(i[0][0]=Math.min(o.minX,o.maxX),i[1][0]=Math.max(o.minX,o.maxX)),i)},_isLarge:function(t,e){return e.length<2?!1:"horizontal"===t?Math.abs(e[0][0]-e[1][0])<.5:Math.abs(e[0][1]-e[1][1])<.5},_getLargePointList:function(t,e){var i;i="horizontal"===t?this.component.grid.getWidth():this.component.grid.getHeight();for(var o=e.length,n=[],r=0;i>r;r++)n[r]=e[Math.floor(o/i*r)];return n},_getSmooth:function(t){return t?.3:0},_getCalculableItem:function(t,e,i,o,n,r){var s=this.series,h=s[t].calculableHolderColor||this.ecTheme.calculableHolderColor||a.calculableHolderColor,l=this._getSymbol(t,e,i,o,n,r);return l.style.color=h,l.style.strokeColor=h,l.rotation=[0,0],l.hoverable=!1,l.draggable=!1,l.style.text=void 0,l},_getSymbol:function(t,e,i,o,n,r){var s=this.series,a=s[t],h=a.data[e],l=this.getSymbolShape(a,t,h,e,i,o,n,this._sIndex2ShapeMap[t],this._sIndex2ColorMap[t],"#fff","vertical"===r?"horizontal":"vertical");return l.zlevel=this.getZlevelBase(),l.z=this.getZBase()+1,this.deepQuery([h,a,this.option],"calculable")&&(this.setCalculable(l),l.draggable=!0),l},getMarkCoord:function(t,e){var i=this.series[t],o=this.xMarkMap[t],n=this.component.xAxis.getAxis(i.xAxisIndex),r=this.component.yAxis.getAxis(i.yAxisIndex);if(e.type&&("max"===e.type||"min"===e.type||"average"===e.type)){var s=null!=e.valueIndex?e.valueIndex:null!=o.maxX0?"1":"";return[o[e.type+"X"+s],o[e.type+"Y"+s],o[e.type+"Line"+s],o[e.type+s]]}return["string"!=typeof e.xAxis&&n.getCoordByIndex?n.getCoordByIndex(e.xAxis||0):n.getCoord(e.xAxis||0),"string"!=typeof e.yAxis&&r.getCoordByIndex?r.getCoordByIndex(e.yAxis||0):r.getCoord(e.yAxis||0)]},refresh:function(t){t&&(this.option=t,this.series=t.series),this.backupShapeList(),this._buildShape()},ontooltipHover:function(t,e){for(var i,o,n=t.seriesIndex,r=t.dataIndex,s=n.length;s--;)if(i=this.finalPLMap[n[s]])for(var a=0,h=i.length;h>a;a++){o=i[a];for(var l=0,c=o.length;c>l;l++)r===o[l][2]&&e.push(this._getSymbol(n[s],o[l][2],o[l][3],o[l][0],o[l][1],"horizontal"))}},addDataAnimation:function(t,e){function i(){g--,0===g&&e&&e()}for(var o=this.series,n={},r=0,s=t.length;s>r;r++)n[t[r][0]]=t[r];for(var a,h,l,c,d,p,u,g=0,r=this.shapeList.length-1;r>=0;r--)if(d=this.shapeList[r]._seriesIndex,n[d]&&!n[d][3]){if(this.shapeList[r]._main&&this.shapeList[r].style.pointList.length>1){if(p=this.shapeList[r].style.pointList,h=Math.abs(p[0][0]-p[1][0]),c=Math.abs(p[0][1]-p[1][1]),u="horizontal"===this.shapeList[r]._orient,n[d][2]){if("half-smooth-polygon"===this.shapeList[r].type){var f=p.length;this.shapeList[r].style.pointList[f-3]=p[f-2],this.shapeList[r].style.pointList[f-3][u?0:1]=p[f-4][u?0:1],this.shapeList[r].style.pointList[f-2]=p[f-1]}this.shapeList[r].style.pointList.pop(),u?(a=h,l=0):(a=0,l=-c)}else{if(this.shapeList[r].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[r].type){var m=this.shapeList[r].style.pointList.pop();u?m[0]=p[0][0]:m[1]=p[0][1],this.shapeList[r].style.pointList.push(m)}u?(a=-h,l=0):(a=0,l=c)}this.shapeList[r].style.controlPointList=null,this.zr.modShape(this.shapeList[r])}else{if(n[d][2]&&this.shapeList[r]._dataIndex===o[d].data.length-1){this.zr.delShape(this.shapeList[r].id);continue}if(!n[d][2]&&0===this.shapeList[r]._dataIndex){this.zr.delShape(this.shapeList[r].id);continue}}this.shapeList[r].position=[0,0],g++,this.zr.animate(this.shapeList[r].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[a,l]}).during(function(t){t.style.controlPointList=null}).done(i).start()}g||i()}},r.prototype.iconLibrary.legendLineIcon=i,l.inherits(e,o),t("../chart").define("line",e),e}),define("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(t){function e(t){i.call(this,t)}var i=t("zrender/shape/Base"),o=t("zrender/shape/util/smoothBezier"),n=t("zrender/tool/util");return e.prototype={type:"half-smooth-polygon",buildPath:function(e,i){var n=i.pointList;if(!(n.length<2))if(i.smooth){var r=o(n.slice(0,-2),i.smooth,!1,i.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var s,a,h,l=n.length,c=0;l-3>c;c++)s=r[2*c],a=r[2*c+1],h=n[c+1],e.bezierCurveTo(s[0],s[1],a[0],a[1],h[0],h[1]);e.lineTo(n[l-2][0],n[l-2][1]),e.lineTo(n[l-1][0],n[l-1][1]),e.lineTo(n[0][0],n[0][1])}else t("zrender/shape/Polygon").prototype.buildPath(e,i)}},n.inherits(e,i),e});